import{u as U,a as M,U as k}from"./index-KN2Dh_4E.js";import{f as V,P as n,X as p,V as B,W as N,E as b,J as C,l as r,S as a,U as h,Y as m,d as T,v as R,Q as x,a1 as E,F as j,a2 as D,a3 as Y}from"./vue-3-isxJqP.js";import{V as w,m as G,n as f,o as g}from"./vuetify-shpi_k0Z.js";import{_ as $}from"./_plugin-vue_export-helper-x3n3nnut.js";/* empty css                            */const F=""+new URL("ticket-machine-BSa6pcGu.png",import.meta.url).href,H=""+new URL("interview-IjrDYD4-.png",import.meta.url).href,A=""+new URL("ticket-EZ-GNAYk.png",import.meta.url).href,J=""+new URL("ticket_eaten-Y7LISLpR.png",import.meta.url).href,P={class:"ticket-container"},Q={key:0,src:A,alt:"Ticket",class:"ticket-image"},W={key:1,src:J,alt:"Ticket",class:"ticket-image"},X={key:2,class:"ticket-number"},Z={class:"button-placeholder"},q=V({__name:"TicketComponent",props:{ticket:{}},emits:["eat"],setup(i,{emit:d}){const s=i,c=d,t=l=>{c("eat",l)};return(l,_)=>(n(),p("div",P,[s.ticket.status==="active"?(n(),p("img",Q)):(n(),p("img",W)),s.ticket.status==="active"?(n(),p("div",X,B(s.ticket.number),1)):N("",!0),b(r(w,{color:"error",class:"eat-button ml-1",onClick:_[0]||(_[0]=y=>t(l.ticket.id)),variant:"outlined"},{default:a(()=>[h("Съесть")]),_:1},512),[[C,s.ticket.status==="active"]]),b(m("div",Z,null,512),[[C,l.ticket.status!=="active"]])]))}}),z=$(q,[["__scopeId","data-v-9cde9dc2"]]),S=i=>(D("data-v-c835a61d"),i=i(),Y(),i),K=S(()=>m("div",{class:"image-wrapper"},[m("img",{src:F,alt:"Coin",class:"mb-4 responsive-image"})],-1)),O=S(()=>m("div",{class:"image-wrapper"},[m("img",{src:H,alt:"Coin",class:"mb-4 responsive-image"})],-1)),ee=10,te=V({__name:"HomeView",setup(i){const d=U(),s=M(),c=T([]),t=T(""),l=async()=>{try{const e=await k.buyTicket();c.value.push(e),d.subBalance(ee)}catch(e){e.response&&e.response.data&&e.response.data.error?t.value=e.response.data.error:t.value="Произошла непредвиденная ошибка",s.setMessage(`Ошибка: ${t.value}`)}},_=async()=>{try{const e=await k.interview();s.setMessage(`Вам сопутствовала удача, и вы успешно прошли собеседование! Помимо престижной позиции, вы заработали это: ${e.flag}`),d.user.luck=0}catch(e){e.response&&e.response.data&&e.response.data.error?t.value=e.response.data.error:t.value="Произошла непредвиденная ошибка",t.value==="вы не прошли интервью"&&e.response.data.message?s.setMessage(e.response.data.message):s.setMessage(`Ошибка: ${t.value}`)}},y=async e=>{try{const o=await k.eatTicket(e),u=o.ticket,v=o.luck;d.updateLuck(v);const I=c.value.findIndex(L=>L.number===u);c.value[I].status="eaten",s.setMessage(`Вы съели билетик и получили ${v>0?"+":""}${v} к удаче`)}catch(o){o.response&&o.response.data&&o.response.data.error?t.value=o.response.data.error:t.value="Произошла непредвиденная ошибка",s.setMessage(`Ошибка: ${t.value}`)}};return R(async()=>{const e=await k.getTickets();c.value=e.sort((o,u)=>o.id-u.id)}),(e,o)=>(n(),x(G,null,{default:a(()=>[r(g,{class:"mt-4"},{default:a(()=>[r(f,{cols:"6",class:"flex flex-col items-center justify-center"},{default:a(()=>[K,r(w,{color:"primary",onClick:l},{default:a(()=>[h("Купить билет")]),_:1})]),_:1}),r(f,{cols:"6",class:"flex flex-col items-center justify-center"},{default:a(()=>[O,r(w,{color:"primary",onClick:_},{default:a(()=>[h("Пройти интервью")]),_:1})]),_:1})]),_:1}),r(g,{class:"mt-12"},{default:a(()=>[r(f,{cols:"12"},{default:a(()=>[r(g,{"no-gutters":""},{default:a(()=>[(n(!0),p(j,null,E(c.value,u=>(n(),x(f,{cols:"12",lg:"2",md:"2",sm:"3",xs:"4",key:u.id,class:"mb-4 d-flex align-center justify-center"},{default:a(()=>[r(z,{ticket:u,onEat:y},null,8,["ticket"])]),_:2},1024))),128))]),_:1})]),_:1})]),_:1})]),_:1}))}}),ne=$(te,[["__scopeId","data-v-c835a61d"]]);export{ne as default};
